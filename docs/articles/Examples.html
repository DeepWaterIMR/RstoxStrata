<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gallery of strata system examples â€¢ RstoxStrata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Gallery of strata system examples">
<meta property="og:description" content="RstoxStrata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RstoxStrata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/RstoxStrata.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Examples.html">Gallery of strata system examples</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DeepWaterIMR/RstoxStrata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Gallery of strata system examples</h1>
                        <h4 data-toc-skip class="author">Mikko Vihtakari (Institute of Marine Research)</h4>
            
            <h4 data-toc-skip class="date">25 January, 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/DeepWaterIMR/RstoxStrata/blob/HEAD/vignettes/Examples.Rmd" class="external-link"><code>vignettes/Examples.Rmd</code></a></small>
      <div class="hidden name"><code>Examples.Rmd</code></div>

    </div>

    
    
<div class="section level1">
<h1 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h1>
<p>This document contains examples of strata systems generated for various species needed by the author. The decisions behind the strata systems are not justified here and this document should be seen as a show piece of how the package can be used and a gallery for people working with stock assessment at IMR.</p>
</div>
<div class="section level1">
<h1 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h1>
<p>We use <a href="https://www.gebco.net/data_and_products/gridded_bathymetry_data/" class="external-link">General Bathymetric Chart of the Oceans</a> 15-arcsecond 2021 grid as bottom depth information to model the vertical distribution of the species. Since the file is 7.5 Gb, it is best to download the file to a central location on your computer and refer to that position instead of including the file in every project:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">link</span> <span class="op">&lt;-</span> <span class="st">"~/Desktop/gebco_2021/GEBCO_2021.nc"</span> <span class="co"># Link to bathymetry data</span></code></pre></div>
<p>Packages required to run the examples:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://DeepWaterIMR.github.io/RstoxStrata/" class="external-link">RstoxStrata</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mikkovihtakari.github.io/ggOceanMaps/" class="external-link">ggOceanMaps</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h1>
<div class="section level2">
<h2 id="greater-argentine-in-the-north-sea">Greater argentine in the North Sea<a class="anchor" aria-label="anchor" href="#greater-argentine-in-the-north-sea"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">geostrata.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lon.min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.2</span>, <span class="fl">3.2</span>, <span class="fl">7</span><span class="op">)</span>, 
                           lon.max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">7</span>, <span class="fl">13</span><span class="op">)</span>, 
                           lat.min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">59</span>, <span class="fl">57</span>, <span class="fl">57</span><span class="op">)</span>, 
                           lat.max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">59</span>, <span class="fl">59.2</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">depths.vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">300</span>, <span class="fl">500</span>, <span class="fl">1000</span><span class="op">)</span>

<span class="va">boundary.vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">13</span>, <span class="fl">57</span>, <span class="fl">61</span><span class="op">)</span>

<span class="co">## Strata polygons vs. stations ####</span>

<span class="va">pols</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/strataPolygon.html">strataPolygon</a></span><span class="op">(</span>
  bathy <span class="op">=</span> <span class="va">link</span>, 
  depths <span class="op">=</span> <span class="va">depths.vec</span>, 
  boundary <span class="op">=</span> <span class="va">boundary.vec</span>,
  geostrata <span class="op">=</span> <span class="va">geostrata.df</span>,
  fragment.area <span class="op">=</span> <span class="fl">100</span>
<span class="op">)</span>

<span class="co">## Plot </span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pols</span><span class="op">)</span></code></pre></div>
<p><img src="Examples_files/figure-html/unnamed-chunk-4-1.png" width="720"></p>
<p>There are no stations in the shallowest strata of A and the function fails to remove a small fjord fragments:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pols</span><span class="op">$</span><span class="va">strata</span> <span class="op">&lt;-</span> <span class="va">pols</span><span class="op">$</span><span class="va">strata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">geostrata.name</span> <span class="op">==</span> <span class="st">"A"</span> <span class="op">&amp;</span> <span class="va">to</span> <span class="op">==</span> <span class="op">-</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="va">pols</span><span class="op">$</span><span class="va">strata</span> <span class="op">&lt;-</span> <span class="fu">smoothr</span><span class="fu">::</span><span class="fu"><a href="https://strimas.com/smoothr/reference/drop_crumbs.html" class="external-link">drop_crumbs</a></span><span class="op">(</span>
  <span class="va">pols</span><span class="op">$</span><span class="va">strata</span>, 
  <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">50</span>, <span class="st">"km^2"</span>, mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pols</span>, facetted <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="Examples_files/figure-html/unnamed-chunk-5-1.png" width="720"></p>
</div>
<div class="section level2">
<h2 id="greenland-halibut-continental-slope-norway-egganord">Greenland halibut continental slope, Norway (EggaNord)<a class="anchor" aria-label="anchor" href="#greenland-halibut-continental-slope-norway-egganord"></a>
</h2>
<p>This strata system attempts to mimic the strata system for EggaN survey index used in <a href="https://www.ices.dk/sites/pub/Publication%20Reports/Advice/2021/2021/ghl.27.1-2.pdf" class="external-link">AFWG 2021 assessment</a> as closely as possible. The calculus for the strata area used in stock assessment have been lost and they are not reproducible.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">geostrata.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  lon.min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">8</span><span class="op">)</span>,
  lon.max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">17.3</span>, <span class="fl">17.3</span>, <span class="fl">17.3</span><span class="op">)</span>,
  lat.min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">76</span>, <span class="fl">73.5</span>, <span class="fl">70.5</span>, <span class="fl">68</span><span class="op">)</span>,
  lat.max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">76</span>, <span class="fl">73.5</span>, <span class="fl">70.5</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">depths.vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">400</span>, <span class="fl">500</span>, <span class="fl">700</span>, <span class="fl">1000</span>, <span class="fl">1500</span><span class="op">)</span>

<span class="va">boundary.vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">17.3</span>, <span class="fl">68</span>, <span class="fl">80</span><span class="op">)</span>

<span class="va">pols</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/strataPolygon.html">strataPolygon</a></span><span class="op">(</span>
  bathy <span class="op">=</span> <span class="va">link</span>, 
  depths <span class="op">=</span> <span class="va">depths.vec</span>, 
  boundary <span class="op">=</span> <span class="va">boundary.vec</span>,
  geostrata <span class="op">=</span> <span class="va">geostrata.df</span>,
  fragment.area <span class="op">=</span> <span class="fl">400</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pols</span>, facetted <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="Examples_files/figure-html/unnamed-chunk-6-1.png" width="720"></p>
</div>
<div class="section level2">
<h2 id="greenland-halibut-in-west-greenland">Greenland halibut in West Greenland<a class="anchor" aria-label="anchor" href="#greenland-halibut-in-west-greenland"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">geostrata.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  lon.min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">58</span>, <span class="op">-</span><span class="fl">58</span><span class="op">)</span>,
  lon.max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">51</span>, <span class="op">-</span><span class="fl">51</span><span class="op">)</span>,
  lat.min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64.2</span>, <span class="fl">62.4</span><span class="op">)</span>,
  lat.max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">66.2</span>, <span class="fl">64.2</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">depths.vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">400</span>, <span class="fl">1500</span><span class="op">)</span>

<span class="va">boundary.vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">58</span>, <span class="op">-</span><span class="fl">51</span>, <span class="fl">62</span>, <span class="fl">67</span><span class="op">)</span>

<span class="va">pols</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/strataPolygon.html">strataPolygon</a></span><span class="op">(</span>
  bathy <span class="op">=</span> <span class="va">link</span>, 
  depths <span class="op">=</span> <span class="va">depths.vec</span>, 
  boundary <span class="op">=</span> <span class="va">boundary.vec</span>,
  geostrata <span class="op">=</span> <span class="va">geostrata.df</span>,
  fragment.area <span class="op">=</span> <span class="fl">1000</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pols</span>, rotate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="Examples_files/figure-html/unnamed-chunk-7-1.png" width="720"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mikko Vihtakari.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
